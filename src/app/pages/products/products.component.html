<section class="pt-5 pb-4 products bg-section2 mt-15">
  <div class="container px-3 mx-auto">
    <div class="py-2 my-4 title">
      <a
        [routerLink]="['/home']"
        class="text-gray-400 text-[16px] font-extrabold hover:text-gray-900 transition-colors"
        >Home
      </a>
      <span class="text-gray-400"> ></span>
      <span class="text-gray-400 text-[16px] font-bold"> Our Products </span>
    </div>
    <div class="max-w-3xl px-4 mx-auto mt-10 mb-10 text-center title">
      <h2 class="mb-4 text-3xl font-bold text-second section-head">
        Our Products
      </h2>
    </div>

    <div class="grid grid-cols-12 gap-6 main">
      <div
        class="flex items-center justify-between col-span-12 p-2 bg-white actions"
      >
        <div class="sort w-fit">
          <p-select
            [options]="stateOptions"
            [(ngModel)]="param.sort"
            optionValue="value"
            [checkmark]="true"
            optionLabel="label"
            [showClear]="true"
            placeholder="Order by Price	"
            class="w-full"
            (onChange)="onSortChange()"
          />
        </div>

        <button
          (click)="clearAllFilters()"
          class="bg-red-100 text-red-950 rounded-md px-2 py-3 text-[12px] h-auto md:h-fit md:text-sm hover:bg-red-600 hover:text-white clear cursor-pointer transition"
        >
          Clear Filters
          <span class="text-red-500"><i class="fa-solid fa-broom"></i></span>
        </button>
      </div>

      <div
        class="flex-col hidden gap-10 p-4 bg-white filters md:col-span-4 lg:col-span-3 md:flex"
      >
        @if (categories) {
        <p-select
          [options]="categories"
          [(ngModel)]="selectedcategory"
          [checkmark]="true"
          optionLabel="name"
          [showClear]="true"
          placeholder="Select a category"
          class="w-full"
          (onChange)="onSelectCategory($event)"
        />
        }

        <div class="price-range">
          <h3 class="mb-2 font-semibold text-gray-700">ðŸ’° Price Range</h3>

          <p-slider
            [(ngModel)]="rangeValues"
            [range]="true"
            class="w-[70%]"
            min="0"
            max="50000"
            step="100"
          />

          <div
            class="flex items-center justify-between mt-2 text-sm text-gray-500 from-to"
          >
            <span>{{ rangeValues[0] }}$</span>
            <span>{{ rangeValues[1] }}$</span>
          </div>

          <button
            class="mt-4 bg-main text-white rounded-md px-4 py-2 text-sm hover:bg-opacity-90 transition hover:bg-[#8c2c86]"
            (click)="applyPrice()"
          >
            Apply Price Filter
          </button>
        </div>
      </div>

      <div class="relative col-span-12 items md:col-span-8 lg:col-span-9">
        <div class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4">
          @for (product of productList; track product.id) {
          <app-product [product]="product"></app-product>
          }
        </div>
      </div>
    </div>

    <!-- Paginator -->
    <div class="flex justify-center mt-6">
      <p-paginator
        [first]="first"
        [rows]="rows"
        [totalRecords]="totalRecords"
        (onPageChange)="onPageChange($event)"
        [pageLinkSize]="pageLinkSize"
        [rowsPerPageOptions]="[10, 20, 30]"
      />
    </div>
  </div>
</section>
<div class="flex justify-center card">
  <p-drawer [(visible)]="visible" header="Filters">
    <div class="flex flex-col gap-10 filters">
      @if (categories) {
      <p-select
        [options]="categories"
        [(ngModel)]="selectedcategory"
        [checkmark]="true"
        optionLabel="name"
        [showClear]="true"
        placeholder="Select a category"
        class="w-full col-span-2"
        (onChange)="onSelectCategory($event)"
      />
      }

      <div class="w-full col-span-3 price-range">
        <h3 class="mb-2 font-semibold text-gray-700">ðŸ’° Price Range</h3>

        <p-slider
          [(ngModel)]="rangeValues"
          [range]="true"
          class="w-[70%]"
          min="0"
          max="50000"
          step="100"
        />

        <div
          class="flex items-center justify-between mt-2 text-sm text-gray-500 from-to"
        >
          <span>{{ rangeValues[0] }}$</span>
          <span>{{ rangeValues[1] }}$</span>
        </div>

        <button
          class="mt-4 bg-main text-white rounded-md px-4 py-2 text-sm hover:bg-opacity-90 transition hover:bg-[#8c2c86]"
          (click)="applyPrice()"
        >
          Apply Price Filter
        </button>
      </div>
    </div>
  </p-drawer>
  <a
    (click)="visible = true"
    class="flex flex-col w-fit items-center p-2 text-white rounded md:hidden justify-evenly bg-main fixed top-[50%] left-2 h-[100px]"
  >
    <span> <i class="fa-solid fa-sliders"></i> </span>
    <span class="text-[15px] tracking-wide filter-btn rotate-180">Filter</span>
  </a>
</div>
