<section class="products pt-10 bg-section2 pb-4">
  <div class="container mx-auto px-3 mt-20">
    <div class="max-w-3xl mx-auto px-4 title text-center mb-10">
      <h2 class="text-3xl font-bold text-second mb-4 section-head">
        Our Products
      </h2>
      <p class="text-gray-500 text-lg">
        Discover amazing products from top brands. Filter, search, and find
        exactly what you're looking for.
      </p>
    </div>

    <div
      class="filters p-6 grid grid-cols-1 lg:grid-cols-8 items-start gap-6 md:gap-8 bg-white rounded-xl shadow mb-6"
    >
      @if (categories) {
      <p-select
        [options]="categories"
        [(ngModel)]="selectedcategory"
        [checkmark]="true"
        optionLabel="name"
        [showClear]="true"
        placeholder="Select a category"
        class="w-full col-span-2"
        (onChange)="onSelectCategory($event)"
      />
      }

      <div class="price-range col-span-3 w-full">
        <h3 class="text-gray-700 mb-2 font-semibold">ðŸ’° Price Range</h3>

        <p-slider
          [(ngModel)]="rangeValues"
          [range]="true"
          class="w-[70%]"
          min="0"
          max="50000"
          step="100"
        />

        <div
          class="from-to flex items-center justify-between text-gray-500 text-sm mt-2"
        >
          <span>{{ rangeValues[0] }}$</span>
          <span>{{ rangeValues[1] }}$</span>
        </div>

        <button
          class="mt-4 bg-main text-white rounded-md px-4 py-2 text-sm hover:bg-opacity-90 transition hover:bg-[#8c2c86]"
          (click)="applyPrice()"
        >
          Apply Price Filter
        </button>
      </div>

      <div class="col-span-3 w-full flex justify-between h-full gap-2">
        <p-selectbutton
          [options]="stateOptions"
          [(ngModel)]="param.sort"
          optionLabel="label"
          optionValue="value"
          (onChange)="onSortChange()"
          class="w-full h-fit gap-2 filter"
        />

        <button
          (click)="clearAllFilters()"
          class="bg-red-100 text-red-950 rounded-md px-4 py-2 text-[12px] h-auto md:h-fit md:text-sm hover:bg-red-600 hover:text-white clear cursor-pointer transition w-[200px] ms-auto"
        >
          Clear Filters
          <span class="text-red-500"><i class="fa-solid fa-broom"></i></span>
        </button>
      </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 p-4">
      @for (product of productList; track product.id) {
      <app-product [product]="product"></app-product>
      }
    </div>

    <!-- Paginator -->
    <div class="flex justify-center mt-6">
      <p-paginator
        [first]="first"
        [rows]="rows"
        [totalRecords]="totalRecords"
        (onPageChange)="onPageChange($event)"
        [pageLinkSize]="pageLinkSize"
        [rowsPerPageOptions]="[10, 20, 30]"
      />
    </div>
  </div>
</section>
